'use client';
import { Metadata } from 'next'
import { Story } from '../lib/stories'
import StoryForm from '../components/StoryForm'

export const metadata: Metadata = {
  title: 'Submit a Story - Global Travel Report',
  description: 'Submit your travel story to Global Travel Report.'
}

export default function SubmitPage() {
  const handleSubmit = async (story: Story) => {
    try {
      const response = await fetch('/api/stories', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(story),
      })

      if (!response.ok) {
        throw new Error('Failed to submit story')
      }

      // Redirect to success page or show success message
      window.location.href = '/submit/success'
    } catch (error) {
      console.error('Error submitting story:', error)
      throw error
    }
  }

  return (
    <div className="container mx-auto px-4 py-8">
      <h1 className="text-3xl font-bold mb-4">Submit a Story</h1>
      <p className="mb-8">Share your travel experiences with our community.</p>
      <StoryForm onSubmit={handleSubmit} showRecaptcha={true} />
    </div>
  )
} 





