# Social Media Integration Guide

This guide explains how to set up automatic posting of stories to social media platforms when they are published on the Global Travel Report website.

## Table of Contents

1. [Overview](#overview)
2. [Supported Platforms](#supported-platforms)
3. [Setting Up API Keys](#setting-up-api-keys)
4. [Configuration](#configuration)
5. [Testing](#testing)
6. [Troubleshooting](#troubleshooting)

## Overview

The social media integration automatically posts new stories to various social media platforms when they are published on the Global Travel Report website. This is done through a GitHub Actions workflow that runs after new stories are generated.

The workflow:
1. Generates new stories
2. Commits them to the repository
3. Revalidates the website
4. Posts the stories to social media platforms

## Supported Platforms

The following social media platforms are supported:

- **Twitter (X)**: Posts a tweet with the story title, link, and hashtags
- **Facebook**: Posts the story title, excerpt, link, and image to your Facebook page
- **LinkedIn**: Posts the story title, excerpt, link, and image to your LinkedIn profile
- **Medium**: Publishes the full story content with a canonical link back to your website

## Setting Up API Keys

### Twitter (X)

1. Go to the [Twitter Developer Portal](https://developer.twitter.com/en/portal/dashboard)
2. Create a new app or use an existing one
3. Generate API keys and access tokens
4. Add the following secrets to your GitHub repository:
   - `TWITTER_API_KEY`
   - `TWITTER_API_SECRET`
   - `TWITTER_ACCESS_TOKEN`
   - `TWITTER_ACCESS_SECRET`

### Facebook

1. Go to the [Facebook Developer Portal](https://developers.facebook.com/)
2. Create a new app or use an existing one
3. Set up the Facebook Graph API
4. Generate a page access token with the `pages_manage_posts` permission
5. Add the following secrets to your GitHub repository:
   - `FACEBOOK_PAGE_ID`
   - `FACEBOOK_ACCESS_TOKEN`

### LinkedIn

1. Go to the [LinkedIn Developer Portal](https://www.linkedin.com/developers/)
2. Create a new app or use an existing one
3. Request the necessary permissions (`r_liteprofile`, `w_member_social`)
4. Generate an access token
5. Add the following secrets to your GitHub repository:
   - `LINKEDIN_CLIENT_ID`
   - `LINKEDIN_CLIENT_SECRET`
   - `LINKEDIN_ACCESS_TOKEN`

### Medium

1. Go to your [Medium Settings](https://medium.com/me/settings)
2. Scroll down to the "Integration tokens" section
3. Generate a new integration token
4. Add the following secret to your GitHub repository:
   - `MEDIUM_ACCESS_TOKEN`

## Configuration

The social media posting is configured in the `.github/workflows/daily-stories.yml` file. By default, it will post all new stories that are generated by the daily story generator.

You can customize the posting behavior by modifying the `scripts/social-media-poster.js` file:

- Change the format of posts for each platform
- Adjust the hashtags used
- Modify the content that is shared
- Change which stories are posted

## Testing

You can test the social media posting without actually posting to social media by running:

```bash
npm run post-to-social:test
```

This will simulate the posting process but won't actually post to social media platforms.

To test with a specific story, you can run:

```bash
npm run post-to-social:test -- --story=path/to/story.md
```

## Troubleshooting

### Common Issues

#### Missing API Keys

If you see errors about missing API keys, make sure you've added all the required secrets to your GitHub repository.

#### API Rate Limits

Social media platforms have rate limits on their APIs. If you're posting too frequently, you might hit these limits. The script includes retry logic to handle this, but you might need to adjust the timing of your posts.

#### Post Format Issues

If your posts aren't formatted correctly, check the formatting functions in the `scripts/social-media-poster.js` file.

### Logs

The social media posting process generates logs in the `logs/social-media-poster.log` file. You can check these logs for more information about any issues.

In the GitHub Actions workflow, the logs are included in the workflow run logs and are also uploaded as artifacts.

## Advanced Configuration

### Customizing Post Format

You can customize the format of posts for each platform by modifying the following functions in `scripts/social-media-poster.js`:

- `formatForTwitter`
- `formatForFacebook`
- `formatForLinkedIn`
- `formatForMedium`

### Customizing Hashtags

The hashtags used in posts are generated by the `generateHashtags` function in `scripts/social-media-poster.js`. You can modify this function to change the hashtags used.

### Adding New Platforms

To add support for a new social media platform, you'll need to:

1. Add the necessary API client library to `package.json`
2. Add the API keys to `.env.local.example` and your GitHub repository secrets
3. Update the `initializeApiClients` function in `scripts/social-media-poster.js`
4. Create a formatting function for the new platform
5. Update the `postStoryToSocialMedia` function to post to the new platform
